# **Catnip Cove Testing Results**

![Am I Responsive mock-up of Catnip Cove](./documentation/features/responsive-screenshot.png)

<br/>

**[Link to the Deployed Site]** - [Catnip Cove](https://catnip-cove-8a89db282e0c.herokuapp.com/)

---
## TABLE OF CONTENTS

* [Automated Testing and Validation](#automated-testing-and-validation)
    * [HTML Validation](#html-validation)
    * [CSS Validation](#css-validation)
    * [JavaScript Validation](#javascript-validation)
    * [Python Validation](#python-validation)
    * [Lighthouse Report](#lighthouse-report)
        * [Desktop](#desktop)
        * [Mobile](#mobile)
    * [WAVE Web Accessibility Evaluation Tool](#wave-web-accessibility-evaluation-tool)
    * [Django Automated Testing](#django-automated-testing)
        * [Coverage](#coverage)
* [Manual Testing](#manual-testing)
    * [Testing User Stories](#testing-user-stories)
    * [Full Testing](#full-testing)
* [Bugs, Errors & Solutions](#bugs-found-during-testing-and-development-phase)
    * [Solved Bugs](#solved-bugs)
    * [Known Bugs](#known-bugs)
---

## Automated Testing and Validation
### HTML Validation
I used [W3C Markup Validation Service](https://validator.w3.org/) to validate all the HTML files by url and direct input:
| Page | Result | Validation Details & Screenshots |
| ---- | :-: | -------------------------- |
| 'templates/home/index.html' | 0 errors and 0 warnings | [Home Page](./documentation/validation/html_validation/html-validator-home-page.png) |
| 'templates/home/contact.html' | 0 errors and 0 warnings | [Contact Us Page](./documentation/validation/html_validation/html-validator-contact-page.png) |
| 'templates/cats/cats.html' | 0 errors and 0 warnings | [Cats Page](./documentation/validation/html_validation/html-validator-cats-page.png) |
| 'templates/cats/cat_detail.html' | 0 errors and 0 warnings | [Cat Detail Page](./documentation/validation/html_validation/html-validator-cat-detail-page.png) |
| 'templates/cats/add_cat.html' | 0 errors and 0 warnings | [Add Cat Page](./documentation/validation/html_validation/html-validator-add-cat-page.png) |
| 'templates/cats/edit_cat.html' | 0 errors and 0 warnings | [Edit Cat Page](./documentation/validation/html_validation/html-validator-edit-cat-page.png) |
| 'templates/blog/blog_index.html' | 0 errors and 0 warnings | [Blog Index Page](./documentation/validation/html_validation/html-validator-blog-page.png) |
| 'templates/blog/blog_detail.html' | 0 errors and 0 warnings | [Blog Detail Page](./documentation/validation/html_validation/html-validator-blog-article.png) |
| 'templates/blog/category.html' | 0 errors and 0 warnings | [Blog Category Page](./documentation/validation/html_validation/html-validator-blog-category-page.png) |
| 'templates/blog/add_blog.html' | 0 errors and 0 warnings | [Add Blog Page](./documentation/validation/html_validation/html-validator-add-blog-page.png) |
| 'templates/blog/edit_blog.html' | 0 errors and 0 warnings | [Edit Blog Page](./documentation/validation/html_validation/html-validator-edit-blog-page.png) |
| 'templates/donations/donate.html' | 0 errors and 0 warnings | [Donation Page](./documentation/validation/html_validation/html-validator-donation-page.png) |
| 'templates/donations/success.html' | 0 errors and 0 warnings | [Donation Success Page](./documentation/validation/html_validation/html-validator-donation-success.png) |
| 'templates/profiles/profile.html' | 0 errors and 0 warnings | [Profile Page](./documentation/validation/html_validation/html-validator-profile-page.png) |
| 'templates/allauth/account/login.html' | 4 errors and 0 warnings | [Log In Page](./documentation/validation/html_validation/html-account-signin-page.png) |
| 'templates/allauth/account/logout.html' | 0 errors and 0 warnings | [Log Out Page](./documentation/validation/html_validation/html-validator-logout-page.png) |
| 'templates/allauth/account/signup.html' | 4 errors and 0 warnings | [Sign Up Page](./documentation/validation/html_validation/html-account-signup-page.png) |
| 'templates/allauth/account/password_rest.html' | 0 errors and 0 warnings | [Password Page](./documentation/validation/html_validation/html-password-reset-page.png) |
| 404 page | 0 errors and 0 warnings | [404 page](./documentation/validation/html_validation/html-validator-404-error-page.png) |

Errors found on login and signup pages were left as I could not figure out where these came from due to them being pre-defined Allauth templates using templating. With more time, I would have liked to investigate these in-depth and resolve the errors, the pages still work as they should.

### CSS Validation
I used [W3C CSS Validation Service](https://jigsaw.w3.org/css-validator/) to validate all CSS files by direct input.
| File | Result | Test Details & Screenshots |
| ---- | :-: | -------------------------- |
| blog/static/blog/css/blog.css | Pass | [blog.css](./documentation/validation/css_validation/css-validator-blog.png) |
| donations/static/donations/css/donation.css | Pass with warnings | [donation.css](./documentation/validation/css_validation/css-validator-donations.png) [warnings donation.css](./documentation/validation/css_validation/css-validator-donations-warnings.png) |
| profiles/static/profiles/css/profile.css | Pass | [profile.css](./documentation/validation/css_validation/css-validator-profile.png) |
| static/css/base.css | Pass with warnings | [base.css](./documentation/validation/css_validation/css-validator-base.png) [warnings base.css](./documentation/validation/css_validation/css-validator-base-warnings.png)|

All warnings mentioned above relate to webkits and a border colour for a checkbox which is intentional.

### JavaScript Validation
I used [JSHint](https://jshint.com/) to validate all JavaScript and JQuery files
| Page/File | Result | Test Details & Screenshots |
| ---- | :-: | -------------------------- |
| donations/static/donations/js/stripe_elements.js | 0 errors 21 warnings | [Stripe Element JS](./documentation/validation/js_validation/js-validator-stripe-elements-file.png) [Stripe Element JS Continued](./documentation/validation/js_validation/js-validator-stripe-elements-file2.png) |
| blog/templates/blog/add_blog.html | 0 errors 7 warnings | [Widget Script](./documentation/validation/js_validation/js-validator-script-add-blog-page.png) |
| blog/templates/blog/edit_blog.html | 0 errors 7 warnings | [Widget Script](./documentation/validation/js_validation/js-validator-script-edit-blog-page.png) |
| cats/templates/cats/add_cat.html | 0 errors 7 warnings| [Widget Script](./documentation/validation/js_validation/js-validator-script-add-cat-page.png) |
| cats/templates/cats/edit_cat.html | 0 errors 7 warnings | [Widget Script](./documentation/validation/js_validation/js-validator-script-edit-cat-page.png) |
| cats/templates/cats/cats.html  | 0 errors 5 warnings | [Cat Sorting & Back To Top of Page Script](./documentation/validation/js_validation/js-validator-script-cats-page.png) |
| home/templates/home/contact.html | 0 errors 0 warnings | [Contact Form Script](./documentation/validation/js_validation/js-validator-script-contact-page.png) |

Any warnings received have all been to do with ES6 & ES11 and no errors with actual code.

### Python Validation
I used [Code Institute's Python Linter](https://pep8ci.herokuapp.com/) to lint my Python code.
| File | Result | Validation Details & Screenshots |
| :-- | :-: | -------------------------- |
| custom_storages.py | All clear, no errors found | [custom_storages.py](./documentation/validation/python_validation/python-linter-custom-storages.png)|
| **CATNIP COVE** |  |  |
| catnip_cove/settings.py | All clear, no errors found | [Catnip Cove settings.py validation](./documentation/validation/python_validation/python-linter-catnip-cove-settings.png) |
| catnip_cove/urls.py | All clear, no errors found | [Catnip Cove urls.py validation](./documentation/validation/python_validation/python-linter-catnip-cove-urls.png) |
| catnip_cove/wsgi.py | All clear, no errors found | [Catnip Cove wsgi.py validation](./documentation/validation/python_validation/python-linter-catnip-cove-wsgi.png) |
| **BLOG APP** |  |  |
| blog/widgets.py | All clear, no errors found | [Blog widgets.py validation](./documentation/validation/python_validation/python-linter-blog-widgets.png) |
| blog/views.py | All clear, no errors found | [Blog views.py validation](./documentation/validation/python_validation/python-linter-blog-views.png) |
| blog/urls.py | All clear, no errors found | [Blog urls.py validation](./documentation/validation/python_validation/python-linter-blog-urls.png) |
| blog/models.py | All clear, no errors found | [Blog models.py validation](./documentation/validation/python_validation/python-linter-blog-models.png) |
| blog/forms.py | All clear, no errors found | [Blog forms.py validation](./documentation/validation/python_validation/python-linter-blog-forms.png) |
| blog/apps.py | All clear, no errors found | [Blog apps.py validation](./documentation/validation/python_validation/python-linter-blog-apps.png) |
| blog/admin.py | All clear, no errors found | [Blog admin.py validation](./documentation/validation/python_validation/python-linter-blog-admin.png) |
| **CATS APP** |  |  |
| cats/widgets.py | All clear, no errors found | [Cats widgets.py validation](./documentation/validation/python_validation/python-linter-cats-widgets.png) |
| cats/views.py | All clear, no errors found | [Cats views.py validation](./documentation/validation/python_validation/python-linter-cats-views.png) |
| cats/urls.py | All clear, no errors found | [Cats urls.py validation](./documentation/validation/python_validation/python-linter-cats-urls.png) |
| cats/models.py | All clear, no errors found | [Cats models.py validation](./documentation/validation/python_validation/python-linter-cats-models.png) |
| cats/forms.py | All clear, no errors found | [Cats forms.py validation](./documentation/validation/python_validation/python-linter-cats-forms.png) |
| cats/apps.py | All clear, no errors found | [Cats apps.py validation](./documentation/validation/python_validation/python-linter-cats-apps.png) |
| cats/admin.py | All clear, no errors found | [Cats admins.py validation](./documentation/validation/python_validation/python-linter-cats-admin.png) |
| **DONATION APP** |  |  |
| donations/admin.py | All clear, no errors found | [Donations admin.py validation](./documentation/validation/python_validation/python-linter-donations-admin.png) |
| donations/apps.py | All clear, no errors found | [Donations apps.py validation](./documentation/validation/python_validation/python-linter-donations-apps.png) |
| donations/forms.py | All clear, no errors found | [Donations forms.py validation](./documentation/validation/python_validation/python-linter-donations-forms.png) |
| donations/models.py | All clear, no errors found | [Donations models.py validation](./documentation/validation/python_validation/python-linter-donations-models.png) |
| donations/urls.py | All clear, no errors found | [Donations urls.py validation](./documentation/validation/python_validation/python-linter-donations-urls.png) |
| donations/views.py | All clear, no errors found | [Donations views.py validation](./documentation/validation/python_validation/python-linter-donations-views.png) |
| donations/webhook_handler.py | All clear, no errors found | [Donations webhook_handler.py validation](.) |
| donations/webhooks.py | All clear, no errors found | [Donations webhooks.py validation](./documentation/validation/python_validation/python-linter-donations-webhooks.png) |
| **HOME APP** |  |  |
| home/apps.py | All clear, no errors found | [Home apps.py validation](./documentation/validation/python_validation/python-linter-home-apps.png) |
| home/urls.py | All clear, no errors found | [Home urls.py validation](./documentation/validation/python_validation/python-linter-home-urls.png) |
| home/views.py | All clear, no errors found | [Home views.py validation](./documentation/validation/python_validation/python-linter-home-views.png) |
| **PROFILES APP** |  |  |
| profiles/apps.py | All clear, no errors found | [Profiles apps.py validation](./documentation/validation/python_validation/python-linter-profiles-apps.png) |
| profiles/forms.py | All clear, no errors found | [Profiles forms.py validation](./documentation/validation/python_validation/python-linter-profiles-forms.png) |
| profiles/models.py | All clear, no errors found | [Profiles models.py validation](./documentation/validation/python_validation/python-linter-profiles-models.png) |
| profiles/urls.py | All clear, no errors found | [Profiles urls.py validation](./documentation/validation/python_validation/python-linter-profiles-urls.png) |
| profiles/views.py | All clear, no errors found | [Profiles views.py validation](./documentation/validation/python_validation/python-linter-profiles-views.png) |

### Lighthouse Report
[Chrome DevTools' Lighthouse](https://developer.chrome.com/docs/lighthouse/overview/) was used to test the performance, accessibility, best practices and SEO of the site
#### Desktop
| Page | Result | Screenshot |
| :-- | :-: | :-: |
| index.html | PASS | [index.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-index.png) |
| cats.html | PASS | [cats.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-cats.png) |
| cat_detail.html | PASS | [cat_detail.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-cat-detail.png) |
| contact.html | PASS | [contact.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-contact.png) |
| donate.html | Score 89% - 1% from PASS | [donate.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-donate.png) |
| blog_index.html | PASS | [blog_index.html desktop lighthouse result](./documentation/validation/lighthouse/desktop-blog-index.png) |

#### Mobile
| Page | Result | Screenshot |
| :-- | :-: | :-: |
| index.html | PASS | [index.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-index.png) |
| cats.html | Score 86% - 4% from PASS | [cats.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-cats.png) |
| cat_detail.html | Score 89% - 1% from PASS | [cat_detail.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-cat-detail.png) |
| contact.html | Score 89% - 1% from PASS | [contact.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-contact.png) |
| donate.html | Score 68% | [donate.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-donate.png) |
| blog_index.html | Score 89% - 1% from PASS | [blog_index.html mobile lighthouse result](./documentation/validation/lighthouse/mobile-blog-index.png) |

I would have liked to improve the mobile scores more, but due to time constraints this could not be done and would be implemented in a future version.

### WAVE Web Accessibility Evaluation Tool
[WAVE](https://wave.webaim.org/) was used to ensure that Catnip Cove's content is easily accessible to individuals with disabilities. WAVE assesses the page and identifies many accessibility and Web Content Accessibility Guideline (WCAG) errors, including contrast errors and general accessibility errors within the HTML code, which can then be rectified following the results of the initial evaluation.

I used the WAVE Chrome extension to enable testing of the public pages and also any pages that require user authentication.

| Page | WAVE This Page Result | Reasons for not fixing the contrast errors, if any |
| :-- | --- | --- |
| Home Page | no errors |  |
| Cats Page | no errors |  |
| Cat Detail Page | no errors |  |
| Add a Cat Page  | no errors |  |
| Edit a Cat Page  | no errors, 1 alert | The alert pointed to some text that is hidden for the current cat image, as this was part of the widget created with the Boutique Ado walkthrough, as it's only an alert, I have left it as it is |
| Contact Page | no errors |  |
| Donate Page | no errors, 1 alert | The alert points to an 'orphaned form label', which is the credit/debit card form input label, as this is to do with stripe and only an alert, I have left as it is |
| Profile Page | 0 errors | Fixed: The crispy form did not render 5 labels, I couldn't find a solution by googling so I turned to chatGPT which gave the code and satisfied the WAVE errors; "self.fields[field].widget.attrs['aria-label'] = placeholders.get(field, field.replace('_', ' ').capitalize())" added to the form.py file |
| Blog Index Page | no errors |  |
| Add a Blog Page | 1 errors | The error pointed to the select image button, I added the same code that I put on the add cat page as they are the same widget but the error did not clear, due to time constraints this was left |
| Edit a Blog Page | 1 error, 1 alert | The error is the same as above and the alert was regarding the alt text for the current blog image, the same as the edit cat page alert so these were left as well |
| Blog Detail Page | no errors, 3 alerts | Two alerts applied to headings, which I changed the code but they did not clear, I assume this is a caching issue, tried to clear the website but still did not work. The other alert was for a minor unordered list that was within the blog article itself so this was ignored |
| Blog Category Page | no errors |  |
| 404 Error Page | no errors |  |

<!--### Django Automated Testing
For the automated testing, the writing and running of these tests used [Django's built in test module](https://docs.djangoproject.com/en/4.1/topics/testing/overview/). For each installed application, I created a folder called tests, added the ```__init__.py``` file and the separate files for testing the views, models and forms.

I also used coverage to generate the report and find out the percentage of statements that I was able to cover and those that I missed for every installed application. I tried to achieve as close to the 100% mark as I possibly can, but I am still fairly new to using Automated Testing and am looking forward to learning more to reach this goal.

#### Coverage
| Installed App Coverage Report | Cover in Percentage | Screenshot of Coverage Report |
| -- | :-: | :-: |
| bag app | 77% | [bag app cover](./documentation/coverage_report/coverage-report-bag-app.png) |
| checkout app | 61% | [checkout app cover](./documentation/coverage_report/coverage-report-checkout-app.png) |
| home app | 100% | [home app cover](./documentation/coverage_report/coverage-report-home-app.png) |
| products app | 81% | [product app cover](./documentation/coverage_report/coverage-report-products-app.png) |
| profiles app | 97% | [profile app cover](./documentation/coverage_report/coverage-report-profiles-app.png) |
| reviews app | 83% | [reviews app cover](./documentation/coverage_report/coverage-report-reviews-app.png) |
| wishlist app | 74% | [wishlist app cover](./documentation/coverage_report/coverage-report-wishlist-app.png) |

---
## Manual Testing
### Testing User Stories
### **User Stories**
| **User Story #** | **As a/an** | **I want to be able to...** | **So that I can...** | **How was this achieved** | **Evidence**
| :-- | :-- | :-- | :-- | :-- | :-- |
| **VIEWING & NAVIGATION** |  |  |  |  |  |
| 1 | Shopper | Navigate around the site | View a list of products | The navbar's main navigation component allows the shoppers to browse for products. The all products link from the main navigation enables the visitors to view the list of all the products available on the site. | [desktop](./documentation/user_stories_testing/user-story-1-view-list-of-products-desktop.png), [tablet](./documentation/user_stories_testing/user-story-1-view-list-of-products-tablet.png), [mobile](./documentation/user_stories_testing/user-story-1-view-list-of-products-mobile.png) |
| 2 | Shopper | View a specific category of products | Quickly find products I'm interested in without having to search through all products. | The site's main navigation component allows the shoppers to browse for specific category of products. | [desktop](./documentation/user_stories_testing/user-story-2-view-specific-category-of-products-skincare-desktop.png), [tablet](./documentation/user_stories_testing/user-story-2-view-specific-category-of-products-hair-body-tablet.png), [mobile](./documentation/user_stories_testing/user-story-2-view-specific-category-of-products-skincare-mobile.png) |
| 3 | Shopper | Quickly identify deals, clearance items and special offers | Take advantage of special savings on products I'd like to purchase | The users can quickly find all available deals from the main navigation where they can click on special offers and a dropdown of items lists all the new arrivals, the top deals, the clearance and an all special offers link. | [desktop](./documentation/user_stories_testing/user-story-3-quickly-identify-deals-desktop.png), [tablet](./documentation/user_stories_testing/user-story-3-quickly-identify-deals-tablet.png), [mobile](./documentation/user_stories_testing/user-story-3-quickly-identify-deals-mobile.png) |
| 4 | Shopper | Quickly view how much was the original price | Identify how much I may be able to save when buying the product and may also help me compare prices with other sites | When discounts are available, the individual product cards display how much is the product price, the original product price (crossed out) and amount the shoppers can potentially save. From the products page, the shoppers are also able to sort through all the discounts available from high to low. | [desktop](./documentation/user_stories_testing/user-story-4-view-original-price-and-savings-desktop.png), [tablet](./documentation/user_stories_testing/user-story-4-view-original-price-and-savings-tablet.png) , [mobile](./documentation/user_stories_testing/user-story-4-view-original-price-and-savings-mobile.png), ![discounts sorting: high to low](./documentation/user_stories_testing/user-story-4.gif) |
| 5 | Shopper | View individual product details | Identify the price, description, product reviews, product image, product ingredients and instructions how to use product | A shopper is taken to the product detail page after clicking on a product image or the shop now button from an individual product card. The product detail page displays the product information such as name, image, brand, category, subcategory, available reviews, price, original price and discount amount (if available), description, how to use and ingredients. | [product details](./documentation/user_stories_testing/user-story-5-individual-product-details.png) |
| 6 | Shopper | Easily view the total amount of products in my shopping bag at any time throughout my visit | Avoid spending too much | Whenever a product is added to the shopping bag, a toast will display confirming that the product was indeed added to the bag successfully and also shows how much a shopper needs to spend to reach the free delivery threshold (if not yet reached). Below the bag icon, the running total of the items currently in the bag is displayed and the user can navigate across the different pages on the site and still be able to view the current amount in the bag. | ![total amount in the bag](./documentation/user_stories_testing/user-story-6-view-running-total.gif) |
| 7 | Shopper | Easily view the featured brands | To assure me that Shop K-Beauty really offers K-Beauty products from authentic K-Beauty brands | On the home page of the site, shoppers are able to view the 10 featured K-Beauty brands. | [featured brands](./documentation/user_stories_testing/user-story-7-featured-brands.png) |
| 8 | Shopper | Search/ View all of the available K-Beauty brands | Look for my favourite brands | From the main navigation, the shoppers are able to click on **BRANDS** navlink and it will open the brands page where all available brands are listed with their logos in individual brand card. | [all available brands](./documentation/user_stories_testing/user-story-8-all-available-brands.png) |
| 9 | Shopper | Easily view details about the brand of a product I am purchasing | Learn more about the brands and feel confident about my purchase | Shoppers are provided multiple ways to access information about any K-Beauty brands available from the Shop. <br/> 1) From the brands page, shoppers are able to click on any brand logo and this will take them to the individual brand page. <br/> 2) From the product detail page, a shopper is able to view the brand name of the product. The brand name is clickable and will take the shopper to the brand's brand detail page. <br/> The brand detail page display's the brand logo and brief information about the brand. | [link to brand detail page](./documentation/user_stories_testing/user-story-9-link-to-brand-detail-page.png), [brand detail page](./documentation/user_stories_testing/user-story-9-view-brand-details.png) |
| 10 | Shopper | View a list of available products when viewing the details about a brand | Quickly decide what product to purchase from a particular brand | Continuing on from User Story 9, on the brand detail page, the shoppers are able to view the list of available products from any brand. | [brand detail and available products](./documentation/user_stories_testing/user-story-10-available-products-from-a-brand.png) |
| 11 | Shopper | Find skincare tips and information about K-Beauty skincare routine | Decide which products I need to purchase | From the K-Beauty tips page, shoppers are able to learn more about K-Beauty and get tips and information about K-Beauty skincare routine to help them decide which products they may need to purchase, depending on their skincare goals. | [skincare tips page](./documentation/user_stories_testing/user-story-11-skincare-tips-page.png) |
| 12 | Shopper | Easily navigate from a product category to the corresponding subcategories | Easily find the products I am looking for | The main navigation dropdown provide links to all the categories of products as well as the links to their individual subcategories. The individual product cards from the products page also contain the category and subcategory tags, both of which are also clickable. When a category link is clicked, it opens the products page where all the available products are filtered by that specific category. | ![navigate from a category to subcategories](./documentation/user_stories_testing/user-story-12-category-to-subcategory.gif) |
| 13 | Shopper | View Related products | Make a more informed decision before finalising my purchase | Shoppers are provided four or less related products based on the product's subcategory. The related products are displayed randomly if there's more than four of them and a page refresh changes the display of related products (if more than four are available). | [related products](./documentation/user_stories_testing/user-story-13-related-products.png) |
| **REGISTRATION & USER ACCOUNTS** |   |   |  |  |
| 14 | Shopper | Easily register for an account | Have a personal account and be able to view my profile | Shoppers are easily able to create an account via the site's top navigation which has the My Account icon. This icon has two dropdown links, the first of which is the Sign Up. Clicking the Sign Up link opens the site's sign up page where they can then register to create an account. Alternatively, shoppers who do not yet have an account with the site can also create an account from a link at the checkout page. | [sign up](./documentation/user_stories_testing/user-story-14-sign-up.png), [register an account](./documentation/user_stories_testing/user-story-14-register-for-account.png), [create an account link from checkout page](./documentation/user_stories_testing/user-story-14-checkout-create-an-account.png) |
| 15 | Shopper | Receive an email confirmation after registering | View that my personal account registration was successful | After registering for an account, a shopper will receive an email with a link to confirm their new account. After clicking the email confirmation link, the site opens to the login page where the shopper's username or email and password are already pre-populated and a toast displaying that the email has been confirmed. | [email-confirmation](./documentation/user_stories_testing/user-story-15-email-confirmation.png), [confirm email](./documentation/user_stories_testing/user-story-15-confirm-email.png), [login page after email is confirmed](./documentation/user_stories_testing/user-story-15-after-new-account-is-verified.png) |
| 16 | Shopper | Easily login and logout of my shopper's account | Access my personal account information | Via the top navigation (My Account), users are able to easily login and logout of their shopper's account. Successful log in is confirmed by toast. Once logged in, the shoppers are able to access their personal information, again via the My Account dropdown that displays two options for the user, My Profile and Logout. The My Profile link opens up the logged in user's personal profile page where they can view and edit their default delivery information. The shopper's order history is also displayed, ready for the shopper to review via the order number link. | [login via top navigation link](./documentation/user_stories_testing/), [login toast](./documentation/user_stories_testing/user-story-16-account-login-success-toast.png), [access profile from top nav](./documentation/user_stories_testing/user-story-16-access-personal-account-from-my-account-top-navigation.png), [my profile page](./documentation/user_stories_testing/user-story-16-account-access-personal-info.png) |
| 17 | Shopper | Easily recover my password in case I forget it | Recover access to my account | From the accounts/login page, registered shoppers have the option to click on the **Forgot Password?** link which takes them to the password reset page. Resetting the password comes in several process: <br/> 1) Enter the email address to receive a password reset email. <br/> 2) Open the password reset email that with the link that has the secure key added to take the user to the change password page. <br/> 3) Change the password. A successful password change is further confirmed by a toast message and the user can now login to their account with using their new password. <br/>  Meanwhile, should a shopper enter an email that is not associated with any user account, the password reset page will display the error message. | [forgot password link](./documentation/user_stories_testing/user-story-17-forgot-password-link.png), [password reset](./documentation/user_stories_testing/user-story-17-password-reset.png), [after email is entered](./documentation/user_stories_testing/user-story-17-password-reset-2.png), [password reset email](./documentation/user_stories_testing/user-story-17-password-reset-email.png), [change password](./documentation/user_stories_testing/user-story-17-change-password.png), [password changed successfully](./documentation/user_stories_testing/user-story-17-password-changed-success.png), [error message if email not in any user account](./documentation/user_stories_testing/user-story-17-password-reset-email-not-assigned-to-any-user-account.png) |
| 18 | Shopper | Have a personalised user profile | View my personal order history and order confirmations | A logged in user, via their profile page, has access to their order history, arranged chronologically. The order confirmations are accessible from the Order Number links. | [order history and order numbers](./documentation/user_stories_testing/user-story-18-order-history.png), ![order confirmation](./documentation/user_stories_testing/user-story-18-order-history-confirmations.gif)  |
| **SORTING & SEARCHING** |   |   |  |  |
| 19 | Shopper | Sort the list of available products | Easily identify the best priced, best discounted products and categorically and subcategorically sorted products | Using the sort selector in the products page, users are able to sort all the available products by price, discount, category and subcategories. | ![sort list of products](./documentation/user_stories_testing/user-story-19-sorting-list-of-products.gif) |
| 20 | Shopper | Sort a specific category of product | Find the best priced product in a specific category | From the main navigation, the users can select a specific category of products, for example eye care category. The users can also user the sort selector on the products page to sort a specific category (same example, eye care category). Using the same selector, the user can further sort the results to find the best priced product. | [sample category: eye care](./documentation/user_stories_testing/user-story-20-sort-eye-care-category.png), [sample category: eye care, sorted by price](./documentation/user_stories_testing/user-story-20-sort-eye-care-category-by-price.png) |
| 21 | Shopper | Sort a specific subcategories of products | To easily identify the most suitable product for me to purchase  | From the main navigation, the shoppers are able to select a specific subcategory. Also from the products page, the users are able to sort for subcategories of products. | [main nav: select products by subcategory](./documentation/user_stories_testing/user-story-21-main-nav-sorted-by-subcategories.png), [use sort selector on products page to sort by subcategory](./documentation/user_stories_testing/user-story-21-sort-selector-sorted-products-by-specific-subcategory.png) |
| 22 | Shopper | Sort multiple categories of products simultaneously | Find the best priced products or discounts across broad categories, such as "skincare" or "hair &amp; body" | From the main navigation, by selecting the **All Skincare**, **All Hair &amp; Body** or **All Special Offers** links, the users are able to sort for multiple categories simultaneously. They can then find the best priced products or discounts by using the sort selector box. | [products by multiple categories](./documentation/user_stories_testing/user-stories-22-sort-multiple-categories.png), [multiple categories sorted by price (low to high)](./documentation/user_stories_testing/user-stories-22-sort-multiple-categories-sorted-by-price.png) |
| 23 | Shopper | Search for a product or products by name, by description or by ingredients | Find a specific product I'd like to purchase  | Per the placeholder text on the search bar, users can search for a product by name, description or by ingredients. | [result of search by product name](./documentation/user_stories_testing/user-stories-23-search-by-product-name.png), [result of search by description term](./documentation/user_stories_testing/user-stories-23-search-by-product-description.png), [result of search by product ingredients](./documentation/user_stories_testing/user-stories-23-search-by-product-ingredients.png) |
| 24 | Shopper | Easily see what I've searched for and the number of results | Quickly decide whether the product I want is available | Using the examples for user story #23 above, when users search for a product by name, description or ingredients, the results also include the number of products found. | [number of results - search by product name](./documentation/user_stories_testing/user-stories-23-search-by-product-name.png), [number of results - search by description term](./documentation/user_stories_testing/user-stories-23-search-by-product-description.png), [number of results - search by product ingredients](./documentation/user_stories_testing/user-stories-23-search-by-product-ingredients.png) |
| **PURCHASING & CHECKOUT** |   |   |  |  |
| 25 | Shopper | Quickly view how much was the original price and what savings, if any are available | Easily compare prices with other sites | With every product card, the original price and the savings are displayed, if discount is available. | [original price and savings included in product card, if available](./documentation/user_stories_testing/user-stories-25-original%20price-and-savings.png) |
| 26 | Shopper | Easily select the quantity for a product when purchasing it | Ensure I don't accidentally select the wrong product quantity | From the product detail page as well as from the shopping bag, shoppers are able to adjust the quantity of items prior to checking out. In both instances, users are also only able to increment or decrement the item quantity by a whole number. | [product detail page: increment or decrement item quantity](./documentation/user_stories_testing/user-stories-26-product-detail-page-increment-decrement-item-quantity.png), [shopping bag page: increment or decrement item quantity](./documentation/user_stories_testing/user-stories-26-shopping-bag-page-increment-decrement-item-quantity.png) |
| 27 | Shopper | Easily view notifications on screen when I add a product to my bag | Find out immediately if my actions were correct or if the was an error | A toast message appears whenever a user adds a product to the shopping bag. An error notification also appears if a user increases the product quantity using a float number, as an example. | [toast](./documentation/user_stories_testing/user-story-27-toast.gif), [error](./documentation/user_stories_testing/user-story-27-error.gif) |
| 28 | Shopper | View items in my bag to be purchased | Identify the total cost of my purchase and all items I will receive | From the shopping bag page, shoppers are able to view the items they are planning to purchase including the cost per item, the bag total, the delivery fee (if they have not met the free delivery threshold) as well as the grand total. | [items in the bag](./documentation/user_stories_testing/user-stories-28-items-in-bag.png) |
| 29 | Shopper | Adjust the quantity of individual items in my bag | Easily make changes to my purchase before checkout | From the bag page, shoppers are still able to adjust the quantity of the items in their shopping bag, including even removing the item. A toast will appear notifying the shopper whether an item quantity has been updated or if an item has been removed from the bag. | [adjusting item quantity and removing item from bag](./documentation/user_stories_testing/user-story-29-toasts.gif) |
| 30 | Shopper | Easily enter my payment information | Check out quickly and with no hassles | On the checkout page, shoppers are able to see the information they need to provide to check out quickly, including which information are required. These are their full name, email address, phone number, street address1, town or city and country. They can also see the payment information required such as their card number, month and year of card expiry and the CVC. Errors in logging in the wrong information such as a credit card already expired is dealt with by an error message displayed to the shopper. | [checkout information](./documentation/user_stories_testing/user-stories-30-checkout-page.png), [payment info error](./documentation/user_stories_testing/user-stories-30-checkout-page-error.png) |
| 31 | Shopper | Feel my personal and payment information is safe and secure | Confidently provide the needed information to make a purchase | Shop K-Beauty's payments processing is powered by Stripe. Stripe is a suite of APIs powering online payment processing and commerce solutions for internet businesses of all sizes. | [security at Stripe](https://stripe.com/docs/security?locale=en-GB) |
| 32 | Shopper | View an order confirmation after checkout | Verify that I haven't made any mistakes | After a successful checkout, shoppers are taken to an order confirmation page to thank them for their purchase. The page displays their order information, their order details, the delivery information and the billing info. A toast also appears notifying the shopper that the order has been successfully processed and that an email confirmation is on it's way. | [checkout success with order receipt](./documentation/user_stories_testing/checkout-success-with-order-receipt.png) |
| 33 | Shopper | Receive an email confirmation after checking out | Keep the confirmation of what I've purchased for my records | Upon a successful checkout, a shopper will be sent an email order confirmation to the email address provided at the checkout. | [email confirmation of order sent to shopper](./documentation/user_stories_testing/user-stories-33-email-order-confirmation.png) |
| **PRODUCT REVIEWS** |   |   |  |  |
| 34 | Shopper | View available reviews for a product I am viewing  | Find out what others think of the product | If a product review is available, a shopper can easily view them by clicking on the **See all reviews** button. This takes them to the reviews page displaying all the available reviews for the specific product the shopper was viewing. | [see all reviews button](./documentation/user_stories_testing/user-stories-34-view-available-reviews-part1.png), [available reviews for specific product](./documentation/user_stories_testing/user-stories-34-view-available-reviews-part2.png) |
| 35 | Shopper | Easily see how I can add my reviews on products I purchased | Decide whether I want to add my review | In every product detail page, there's an **Add review** button. If a featured review is available for that product, a **Share your experience** button also shows how a shopper may add a review. As a user needs to be logged in to add a review, clicking either of these buttons redirects the shopper to the log in page and a toast shows they need to be logged in to add a review. | [add review button](./documentation/user_stories_testing/user-stories-34-view-available-reviews-part1.png), [share your experience button](./documentation/user_stories_testing/user-stories-34-view-available-reviews-part2.png), [add review redirect to log in page and toast error](./documentation/user_stories_testing/user-stories-35-redirect-and-toast.png) |
| 36 | Shopper | Easily view/ have access to details about the product I am reviewing | Refer to the information about the product, should I need to do so | When adding a review, details about the product name, image, product category and subcategory, price and original price and discounts (if available) are displayed alongside the review form. The shop now button also redirects the reviewer to the product detail page. | [review form and product info](./documentation/user_stories_testing/user-stories-36-review-form-and-product-info.png) |
| 37 | Shopper | Add my review of the product | Share my personal experience of using the products | The review form enables the logged in shopper to submit a product review. | [review form](./documentation/user_stories_testing/user-stories-36-review-form-and-product-info.png) |
| 38 | Store Owner | Add Featured Reviews on specific product detail page | Opt to highlight specific reviews | Store Owners are able to feature a product review using the Django admin backend by simply ticking the **Is featured** checkbox | [feature a review](./documentation/user_stories_testing/user-stories-38-featured-review.png) |
| 39 | Store Owner | Edit submitted reviews | Opt to block off profanities, if any | A logged in store owner is able to edit a review to remove unwanted content, such as profanities. | [edit review](./documentation/user_stories_testing/user-stories-39-edit-submitted-reviews.png) |
| 40 | Store Owner | Delete a review | Have control over unacceptable comments such as discriminatory statements, if any | A logged in store owner is able to also delete a review. To prevent unintended deletion, a modal pops up a warning that such action will delete the review forever if they continue. The option to **cancel** and **delete** buttons are also included in the modal. | [delete review modal](./documentation/user_stories_testing/user-stories-40-delete-review-modal.png) |
| **ADMIN & STORE MANAGEMENT** |  |  |  |  |
| 41 | Store Owner | Add a product | Add new items to my store | The logged in store owner is able to add a product to the store directly from the product management page. The product management page can be accessed by clicking the **My Account** icon in the top navigation component of the navbar. The icon displays several dropdown links, one of which is **Product Management** | [product management: add a product](./documentation/user_stories_testing/user-stories-41-product-management-add-product.png) |
| 42 | Store Owner | Edit/update a product | Change product process, descriptions, ingredients, images and other product criteria | The logged in store owner is able to edit a product directly in the store using the **Edit Product** button on the product detail page. This button is only displayed to authenticated store owner/ admins and links directly to the product management page. The product management page (edit a product) is exactly the same as the product management page (add a product). The product information is pre-populated. A toast also appears providing an alert that a specific product is being edited. | [product management: edit a product](./documentation/user_stories_testing/user-stories-42-product-management-edit-product.png) |
| 43 | Store Owner | Delete a product | Remove items that are no longer for sale | The logged in store owner is able to delete a product directly in the store using the **Delete Product** button on the product detail page. This button is only displayed to authenticated store owner/ admins. To prevent unintended deletion, a modal pops up a warning that such action will delete the product forever if they continue. The option to **cancel** and **delete** buttons are also included in the modal. | [delete product modal](./documentation/user_stories_testing/user-stories-43-delete-product-button.png) |
| 44 | Store Owner | Have policy pages (privacy, terms & conditions, return & refund and shipping) on the site | Be assured that all the legalities of doing business online are taken care of | The Privacy Policy, Terms &amp; Conditions, Return &amp; Refund Policy and the Shipping Policy pages can be accessed from their respective links in the footer. | [policies](./documentation/user_stories_testing/user-stories-44-policies-links.png) |
| 45 | Store Owner | Receive a warning if I accidentally click the delete a product button | Avoid accidental deletion of a product | To prevent unintended deletion, a modal pops up a warning that such action will delete the product forever if they continue. The option to **cancel** and **delete** buttons are also included in the modal. | [modal](./documentation/user_stories_testing/user-stories-45-delete-product-modal.png) |
| 46 | Store Owner | Add a brand to my store | Add new products even if the product's brand is not in the store yet | The logged in store owner is able to add a brand to the store directly from the brand management page. The brand management page can be accessed by clicking the **My Account** icon in the top navigation component of the navbar. The icon displays several dropdown links, one of which is **Brand Management** | [brand management: add a brand](./documentation/user_stories_testing/user-stories-46-brand-management-add-brand.png) |
| 47 | Store Owner | Edit/ Update a brand in my store | Make changes to a brand name, description, brand logo or choose to feature a brand | The logged in store owner is able to edit a brand directly in the store using the **Edit Brand** button on the brand detail page. This button is only displayed to authenticated store owner/ admins and links directly to the brand management page. The brand management page (edit a brand) is exactly the same as the brand management page (add a brand). The brand information is pre-populated. A toast also appears providing an alert that a specific brand is being edited. | [edit brand button](./documentation/user_stories_testing/user-stories-47-edit-brand-button.png), [brand management: edit a brand](./documentation/user_stories_testing/user-stories-47-brand-management-edit-brand.png) |
| **DIGITAL MARKETING** |   |   |  |  |
| 48 | Store Owner | Have a social media presence | Create awareness of Shop K-Beauty products | From the footer section, on the Follow Us column, the links to social media sites such as Facebook, Instagram, Pinterest and Twitter are included. A Facebook page for Shop K-Beauty is also created as an example of having a social media presence. | [follow us: links to social media pages](./documentation/user_stories_testing/user-stories-44-policies-links.png); [Shop K-Beauty Facebook page](./documentation/user_stories_testing/user-stories-48-shop-kbeauty-facebook-page.png) |
| **USER'S WISHLIST** |   |   |
| 49 | Shopper | Easily add a product to my wishlist | Save it for future purchase or reference | On a product detail page, the wishlist heart icon is to the right of a product's brand name and this is the button that enables the adding of the product to the shopper's wishlist. Clicking this icon either: <br/> i) redirects the shopper to the log in page with a toast informing them that they need to be logged in to add to their wishlist, <br/> or <br/> ii) if they are already logged in, a toast displays confirming that the product has been added to their wishlist. Meanwhile, on the top navigation component of the navbar, in between the My Account and Shopping bag navlinks, is the Wishlist navlink that also turns dark pink when a product is added to the wishlist. This wishlist navlink goes back to its original colour of black when a shopper navigates away from the product detail page but turns back to pink again if the shopper navigates to another product detail page that is already in the shopper's wishlist. If a product is already in the user's wishlist, clicking the wishlist icon again (on the product detail page) will display a toast alerting the shopper of that fact and prevents the duplication of the same product being added to the individual shopper's wishlist more than once. | [add product to wishlist](./documentation/user_stories_testing/user-stories-49-add-product-to-wishlist-toast.png), [toast to alert and prevent duplicate product in wishlist](./documentation/user_stories_testing/user-stories-49-add-product-to-wishlist-toast.png) |
| 50 | Shopper | Easily remove a product from my wishlist | Keep only the products I'm interested in | Via the top navigation component of the navbar, authenticated shoppers can access their wishlist page. The logged in shopper can also access the wishlist page from their profile page via a wishlist button. The wishlist page displays the list of products including the product image, name, price, discount info (if available), a shop now icon (to take them to the product detail page) and a trash icon to enable them to remove the product from their wishlist. Clicking the trash icon removes the product from the shopper's wishlist, redirects them to the product detail page and a toast appears to alert them that the product has been removed from their wishlist. | [wishlist page](./documentation/user_stories_testing/user-stories-50-wishlish-page.png), [wishlist removed toast and redirect](./documentation/user_stories_testing/user-stories-50-remove-product-from-wishlist.png) |

### Full Testing
Full testing was conducted using the following physical devices:
* Mobile:
    * iPhone 14
    * iPhone 11 Pro
    * iPhone 6
* Tablet
    * iPad Pro
    * iPad mini (4th gen)
    * iPad 4
* Laptop
    * MacBook 2012
    * Macbook 2014
    * Alienware m17 r3
* Desktop
    * HP V27e FHD Monitor (27 inch)

---
## Bugs found during testing and development phase
### Solved Bugs
| # | Bugs, Errors and Issues | Solutions |
| :--- | :--- | :--- |
| 1 | Error: You are trying to add a non-nullable field to without a default  | **Solution:** <br/>Choose option 1 from two options provided by Django when making migrations, add timezone.now, then migrate. <br/>A new error appeared: <br/>```TypeError: Field 'id' expected a number but got datetime.datetime(2022, 11, 20, 13, 54, 36, 590663, tzinfo=<UTC>)```. <br/>I then looked for the latest _auto_ file from migrations folder, then changed: <br/>```default=got datetime.datetime(2022, 11, 20, 13, 54, 36, 590663, tzinfo=<UTC>)``` <br/>to <br/>```default=1```. <br/>I was then able to migrate successfully. |
| 2 | Stripe Webhook errors, ```401 ERR```, x 23 times and 100% failure rate  |  After numerous attempts to solve this by going over and over the source code for webhook handlers, searching the Stripe docs and, Stack Overflow and Code Institute's Slack channels, the solution was to share my GitPod workspace |
| 3 | Static and media files not uploading on AmazonS3 bucket | Attempts at fixing this issue remained unsuccessful despite checking multiple times that the steps were followed correctly, that the new CORS configuration was correct and that the steps to creating the AWS Groups, Policies and Users for Shop K-Beauty were also followed and implemented. In the end, I was able to fix the issue by creating a new bucket with new policies. |
| 4 | Reviews were not deleting after an associated product is deleted  | Fortunately, this was a simple bug. I just had to edit the product (fk) in my review model. <br/>``` on_delete=models.SET_NULL``` was changed to ``` on_delete=models.CASCADE ```, then migrate. |
| 5 | **DoesNotExist at /accounts/login/** [error](./documentation/solved_bugs/does-not-exist.png) | In attempting to use [Django-flatpages](https://docs.djangoproject.com/en/4.1/ref/contrib/flatpages/) for the static pages such as terms and conditions, policies, etc., I encountered an issue of not being able to login to the deployed site or to site admin. As it was taking too long to get this flatpages to work, I decided to remove all the changes I have just made. But I made the mistake of tinkering with the [sites content in Django Admin](./documentation/solved_bugs/sites-in-django-admin.png) that caused the error or it could have been caused by allauth views throwing the error as some of the changes I made implementing flatpages included changes to the Middleware in project-level settings.py. <br/> **Steps Taken Towards a Solution:** <br/>1. Check the logs by logging in to the heroku cli <br/> ```heroku login -i ```<br/> ``` heroku apps ``` - this lists all the apps in Heroku <br/> ```heroku logs --tail -a <the app name> ``` - use the correct app name to run the logs command <br/> The logs came back with these: <br/> [heroku-logs-tail-part1](./documentation/solved_bugs/heroku-logs-tail-part1.png)<br/>[heroku-logs-tail-part2](./documentation/solved_bugs/heroku-logs-tail-part2.png)<br/>[heroku-logs-tail-part3](./documentation/solved_bugs/heroku-logs-tail-part3.png)<br/>[heroku-logs-tail-part4](./documentation/solved_bugs/heroku-logs-tail-part4.png)<br/>2. Looking at these errors, the simplest solution was to reset the database by running <br/>```python3 manage.py migrate```<br/> but it didn't work per the terminal:<br/> [No migrations to apply](./documentation/solved_bugs/migrate.png) <br/>3. As it didn't work, the next step was to reset the [ElephantSQL](./documentation/solved_bugs/elephantsql-reset-btn.png) site database and run ```python3 manage.py migrate``` again which came back with these: <br/> [running-migrations-after-resetting-elephantsql-part1](./documentation/solved_bugs/running-migrations-after-resetting-elephantsqldb-part1.png)<br/> [running-migrations-after-resetting-elephantsql-part1](./documentation/solved_bugs/running-migrations-after-resetting-elephantsqldb-part2.png)<br/>4. The migration worked, so the next step was to run the server ```python3 manage.py runserver ```<br/>5. Whoops! The products data were all gone (since the ElephantSQL was reset). But the login functionality now works! The great news was that I had fixtures so I can easily run dumpdata to load the data back. But since I had reviews, I first had to create a few users, starting with creating a superadmin. Next I uploaded the fixtures in specific order (this is important as the products data need access to required three foreign keys (the first three json files below), otherwise I would have gotten another error) by running: <br/>``` python3 manage.py loaddata <json filename> ``` <br/>a) maincategory.json <br/>b) category.json <br/>c) subcategory.json <br/>d) product.json <br/> After uploading the rest of the json files, the checkout and reviews fixtures, the site was back with all the data rendering and the functionalities working as expected. <br/> **Additional note:** I could have also run ``` python3 manage.py loaddata ``` to avoid uploading the files one by one, but I wanted to avoid any potential issues with some data requiring data from other files first. I never created a profiles fixtures, for security purposes.
| 6 | HTML Validation errors on add a product and edit a product pages in products app : **Error: Duplicate attribute id. At line 1351 column 69 id="id_image"** | This is a very interesting error, caused by conflicts between multiple languages. First, the JQuery script to change the image file uses an id of ```#new-image```. This caused a conflict with Django's forms widget clearable_file_input, <br/>````{% include "django/forms/widgets/attrs.html" %}````, which comes with a function <br/>```def clear_checkbox_id(self, name):``` <br/>```"""Given the name of the clear checkbox input, return the HTML id for it."""``` <br/>```return name + "_id"``` <br/>(see from line 438: [Github:Django/Django](https://github.com/django/django/blob/main/django/forms/widgets.py)). Because the script already uses ```#id-image```, when the file input is selected, it returns the HTML id, which resulted in HTML validation error of duplicate atttribute id. <br/><br/>**The solutions came in several steps:** <br/>1. Change the JQuery script from ``` #new-image``` to ```.new-image``` <br/>2. Change the custom_clearble_file_input.html (line 19): from ```<input id="new-image">``` to ```.new-image ``` <br/>3. We cannot leave it here because the forms.py file in the products app has a forloop that adds class attributes: ```for field_name, field in self.fields.items(): field.widget.attrs['class'] = 'border-black rounded-0'```. Left unsolved, we would just be exchanging a duplicate id error with a duplicate class error. So I deleted this forloop. <br/>4. To still have the ```border-black rounded-0``` attributes added to the add/edit a product forms, I then added these to new attributes to base.css ``` select, .form-control {border: 1px solid #000 !important; border-radius: 0 !important;}``` |
| 7 | HTML Validation errors on bag page: **Error: Duplicate ID** and a warning of The ``` type ``` attribute is unnecessary for JavaScript resources. | This is an error that seems to be fairly left unsolved in other ecommerce projects I've seen on GitHub. The fix seems fairly daunting at first, as it points to ``` item_id ```,  which when searching for this line of code across the project can be found on contexts.py, urls.py, views.py, on webhook_handler.py, on quantity_form.html and on quantity_input_script.html. <br/><br/>After initially feeling intimidated about the potential enormity of debugging this error, solving this is actually fairly simple. <br/><br/>**Solution**: <br/>1. On quantity_form.html, from the remove link (below the form), delete ``` id ``` and move ``` remove_{{ item.item_id }} ``` inside the attribute ``` class ```, thus <br/>``` class="remove_{{ item.item_id }}" ```. <br/>2. On script below the bag.html, replace ``` var itemId ``` with ``` var itemClass ```, then replace the ``` .attr('id') ``` with ``` .attr('class') ```. <br/>3. Replace ``` var url = `/bag/remove/${itemId}/`; ``` with ``` var url = `/bag/remove/${itemClass}/`; ```. <br/>To remove the warnings, I just delete the ``` type="text/javascript" ```. |
| 8 | HTML Validation errors on checkout page: **Error: The value of the ```for``` tag attribute of the ```label``` element must be the ID of a non-hidden form control** | **To fix this error, I took the following steps:** <br/>1. Deleted the label tag wrapping the two links to (create an account) and (login). <br/>2. I wrapped said links in a ```<p></p>``` to fix alignments for smaller device. <br/>3. I wrapped the non-link text in ```<span></span>``` to be able to add space between the texts. <br/>4. I tested that by deleting the ``` <label></label> ``` tag and the ```for="id-save-info"``` that was in the label, it will not cause stripe webhooks to stop working, that the links will still work and that a newly created account will still be saved and that there was no adverse effect to the functionalities on the checkout page. I also checked that when I tested the orders, the new orders were indeed saved in the database. <br/><br/>Additionally, when searching for a potential fix to this error, I came across an article from [CSS tricks](https://css-tricks.com/html-inputs-and-labels-a-love-story/), which says, we should not put interactive elements inside labels such as links. I left the warning of empty heading caused by the loading-spinner.|
| 9 | **Product name field error on Django admin** when re-adding a just deleted product and **lack of defensive programming** | After I accidentally deleted a product (COSRX Aloe Soothing Sun Cream SPF 50+ PA+++ (50ml)), I realised there are two bugs I needed to fix. <br/><br/>1. The **first bug**: there was a problem with the name field on my Product model being set to ```unique=True``` since when I tried to add the same product I just deleted, the Django admin showed an error that the name already exists (even though the product was no longer in the db) and the product I was trying to add did indeed get added. Thus, even though adding again the same product was successful, I thought it best to amend the Product model because in a real life situation, products may need to be deleted and should the same products need to be added in the store again, store owners should not have to worry about a Django admin error. <br/>2. The **second bug**: the lack of defensive programming in the project, specifically on the button that allows a superadmin to delete a product. <br/><br/>**To fix these two bugs, I took the following steps**: <br/>1. I changed the name field on the product model to ```unique=False```, and ```migrate```.  <br/>2. Using a modal, I targeted the delete product buttons on the products page and on the product_detail page so that the superadmin will receive a warning prior to confirming the deletion of a product. |
| 10 | **ValueError: invalid literal for int() with base 10: '2.5'** | I came across this bug accidentally when trying to find solutions to the JSHint validation warnings for Quantity Input Script **(products/templates/products/includes/quantity_input_script.html)**. The quantity form in product_detail.html doesn't allow the input of floats (as is expected). But in bag.html it does, so when a user tries to update a product quantity using floats, it triggers this Django error. <br/><br/>**The solution**: <br/>On bag.html, the script to update a product quantity on click ```form.submit()``` needs to be updated to ```form[0].requestSubmit()```. <br/><br/>Credit to [Igor Basuga](https://www.linkedin.com/in/igor-basuga-b2a123111/), currently a Junior Developer and a former Full Stack Software Development Tutor at [Code Institute](https://codeinstitute.net/) for the well documented solution [Debugging - a Detective Story and a Learning Experience](./documentation/solved_bugs/debugging-a-detective-story-igor-ci.pdf) to this bug. |
| 11 | Modal in products.html works in development but not in production | After again accidentally deleting a product, this time in production, I realised that the defensive programming to prevent just this situation by using a modal works in development but not in production. <br/><br/>Since the same defensive programming is functioning successfully in product detail page, I used [Computed Diff](https://www.diffchecker.com/text-compare/) to check for any difference in the code and noticed that on products.html page, the delete a product button is [split into several lines](./documentation/solved_bugs/delete-product-button-modal-bug.png), compared to the same code and the same button on product_detail.html which is [all in one line](documentation/solved_bugs/delete-product-button-modal-bug-solved.png). Putting all the code for the delete a product button in one line solved the modal bug not working on products page in production. |
| 12 | Heroku Build failure | Testing ... as failure traceback says **Launching...Push failed due to an unrecognized error, and we've been notified.! Please try pushing again.! If the problem persists, see https://help.heroku.com/ and provide Request ID <>. Meanwhile, there's no error showing on the terminal. Pushing again solved the bug. |
| 13 | Unable to add new product if the product brand is not in the store yet | Shop K-Beauty is a multi-brand ecommerce store and a brand is required when adding a new product via the product management functionality.  When I tested adding a new product, I realised that a store owner can only add a product if said product's brand is already in the store. A store owner would have to add a brand via the Django admin, which is not ideal in a real life situation. To fix this, and since the code to add a brand is pretty much similar to adding a product and the custom clearable file input can also be reused, it makes sense to add the brand management functionality, starting with adding a brand. |
| 14 | A logged in user is able to add a product to their own wishlist even if the product is already in the wishlist | To Fix this, I first passed both the product and the user_product to the query for an existing duplicate wishlist by using <br/>```Wishlist.objects.get ``` <br/> This didn't work as the GET function will raise an error if a product does not exist in the wishlist. <br/> The next solution is to use a combination of filter/exists, which solved the bug: <br/> ```existing = Wishlist.objects.filter(product=product, user_profile=user).exists() ```. Credit and thanks to Oisin from Tutor Support at Code Institute for helping me solve this bug. |
| 15 |Discount (high to low) and Discount (low to high) sorting not working properly | First, there was a typo on the products template <br/> ```<option value="discount_asc" {% if current_sorting == 'discount_desc' %}selected{% endif %} ```. Whilst the value is "discount_asc", I made the mistake of having 'discount_desc' for the current sorting. This part was easily fixed. Second, although the sorting the products discounts started to work, there were still a few products that appeared before the discounts were sorted. I realised that there also some errors in the data for new arrivals were I added the discount as 0.00 but did not include the data for the original_price field. After adding the missing data, the sorting of discounts high to low and vice versa now both work as intended. |
| 16 | Whilst working on my unit tests, I got an operational error when I tried to log in to production site. The error says, ``` connection to server at rogue.db.elephantsql.com (35....), port 5432 failed: Connection refused ``` | As the unit tests were nowhere near production, this was a big puzzle. After checking that all as they should be on elephantsql (postgresdb), in the config vars in Heroku, and in the env.py file, the solution was to do a manual deploy from Heroku dashboard (deploy tab). |
| 17 | 404 error when an admin deletes a product at the store when said product is also in the shopping bag | To document the deleting a product at the store feature, I added a test product successfully and was redirected to the product detail page. This time, the product that I added has sizes and to also test this, I added the product to the shopping bag. I then decided to test deleting the newly added product which immediately resulted in a 404 error. As DEBUG was already set to False, I couln't trace the error and also could not login to Django admin. Thinking this was caused by setting the product has sizes to True, I duplicated my actions, this time testing it using the development database. The product was successfully deleted and although the 404 error occured, the error was not persistent and was resolved by a hard refresh. But to double check that the persistent error on production was not being caused by the rarely used product has sizes=True option when adding a product, I tested the full CRUD again, this time only the sizes and the product was not in the bag. The 404 error did not occur and all was back to working as expected. The immediate solution to this now is to add a warning on the delete a product modal pop up to check that the product about to be deleted is not in the bag prior to deletion. A better solution would be to add an if else statement in the delete product views but that would have to be for future development. |
| 18 | DataError at /checkout/ value too long for type character varying(2) | When checking out a product that has sizes, I encountered this error. I checked that in my orderlineitem model (checkout app), the product_size field has the max_length set to 2, but on my product detail page, the option values are set to: <br/> ```<option value="30ml">30ml</option>``` <br/>```<option value="60ml"selected>60ml</option>```<br/>```<option value="100ml">100ml</option>```<br/>```<option value="200ml">200ml</option>```<br/>```<option value="330ml">330ml</option>```. <br/> The quick fix for now was to: <br/> i) delete all the *ml* from the option value, <br/> ii) replace the 100 with 90 (to restrict it to max length of 2), <br/> iii) delete the remaining 200 and 300 option values. <br/>After retesting, I was able to checkout successfully buying a product that has a size. But this should be fixed properly in the next development, especially as a 30ml product will have a different price point compared to a 60ml item. I realised that I should either not have included the product_size field in the orderlineitem model but in the beginning of the development, I thought I was going to include providing the shoppers the option to choose sizes. At this rate, I didn't want to have to make the changes to the product pricing based on the size selected as that would require a longer development time. |

### Known Bugs
| # | Known Bugs, Errors and Issues | Justification |
| :--- | :--- | :--- |
| 1 | Browser: Chrome, Error: **Uncaught (in promise) Error: A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received**. This error appears after about a minute or two of loading any page of the web application. | I have spent days looking for where this error was coming from, initially thinking it was caused by the show and hide button on the homepage to hide and show list of available brands. I switched off the event listener. The error still appeared. I tried to debug and refactor all the event listeners but found it impossible to do so without disabling the required JQuery functions for the application to run smoothly. Googling for possible causes and reasons, I have found references to the same error and they point to using incognito mode as a possible solution. The error did not appear when using incognito mode. Due to time constraints, the real solution for this error may be investigated further on the next sprint/ future development. |
| 2 | internal server error when registering a new account | This error came out of the blue since the account registration has been tested multiple times by friends and family and also by myself using temporary emails. After setting the project back and forth between DEBUG=True and DEBUG=False and even asking fellow students to test the account registration functionality, the server error did not appear again. Three other fellow students helped me try and uncover the source of this error by themselves registering a new account with Shop K-Beauty. None of them reported any error and the account registration worked as expected. I cannot recreate the error and neither does it appear again, but since I also did not knowingly solve this bug, I thought it best to list this as a known bug for now and one that I will try in the next sprint/ future development to investigate further. | -->